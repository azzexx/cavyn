<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Download Cavyn</title>

    <link rel="icon" href="../icon.ico">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Advent%20Pro%3A400%2C400italic%2C700%2C700italic">
    <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Advent%20Pro%3A400%2C400italic%2C700%2C700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <main>
        <h1>Download Cavyn</h1>
        <p>Don't get crushed while the cave collapses!</p>
        <p>Curently only for windows, sorry</p>
        <table>
            <tr>
                <th style="user-select: all;">Platform</th>
                <th style="user-select: all;">Size</th>
                <th style="user-select: all;">Version</th>
                <th style="user-select: all;">-</th>
            </tr>
            <tr>
                <td class="platform"><i class="fa-brands fa-windows"></i> Cavyn Custom Setup (Better)</td>
                <td class="size">27.28 MB</td>
                <td class="version">6.0.3</td>
                <th class="download-link"><a
                        href="https://github.com/azzexx/cavyn/releases/download/cavyn/Cavyn_Setup_6.0.3.exe"
                        download>Download</a></th>
            </tr>
        </table>

        <br>

        <table>
            <tr>
                <th style="user-select: all;">Platform</th>
                <th style="user-select: all;">Size</th>
                <th style="user-select: all;">Version</th>
                <th style="user-select: all;">-</th>
            </tr>
            <tr>
                <td class="platform"><i class="fa-brands fa-windows"></i> Windows 10 pro</td>
                <td class="size">27.5 MB</td>
                <td class="version">4.0.1</td>
                <th class="download-link"><a
                        href="https://github.com/azzexx/cavyn/releases/download/cavyn/Cavyn_Setup.exe"
                        download>Download</a></th>
            </tr>
            <tr>
                <td class="platform"><i class="fa-brands fa-windows"></i> Windows 10 home</td>
                <td class="size">27.5 MB</td>
                <td class="version">2.3.0</td>
                <th class="download-link"><a
                        href="https://github.com/azzexx/cavyn/releases/download/cavyn/Cavyn_Setup.exe"
                        download>Download</a></th>
            </tr>
        </table>

        <br>

        <table>
            <tr>
                <th style="user-select: all;">Platform</th>
                <th style="user-select: all;">Size</th>
                <th style="user-select: all;">Version</th>
                <th style="user-select: all;">-</th>
            </tr>
            <tr>
                <td class="platform"><i class="fa-brands fa-windows"></i> Windows 7</td>
                <td class="size">27.5 MB</td>
                <td class="version">1.0.1</td>
                <th class="download-link"><a
                        href="https://github.com/azzexx/cavyn/releases/download/cavyn/Cavyn_Setup_1.0.1.exe"
                        download>Download</a></th>
            </tr>
        </table>

        <br>

        <table>
            <tr>
                <th style="user-select: all;">Platform</th>
                <th style="user-select: all;">Size</th>
                <th style="user-select: all;">Version</th>
                <th style="user-select: all;">-</th>
            </tr>
            <tr>
                <td class="platform"><i class="fa-brands fa-windows"></i> Windows 11 (I hate this platform)</td>
                <td class="size">27.28 MB</td>
                <td class="version">6.0.3</td>
                <th class="download-link"><a
                        href="https://github.com/azzexx/cavyn/releases/download/cavyn/Cavyn_Setup_6.0.3.exe"
                        download>Download</a></th>
            </tr>
        </table>


        <p style="font-style: italic;">Made in less than 48 hours with the theme "Caves".</p>

        <br>

        <h1>Github Releases
            <div class='com-title'>
                <p>Auto-Updating</p>
            </div>
        </h1>

        <div id="releases"></div>

        <script>
            const releasesContainer = document.getElementById('releases');
            const username = 'azzexx';
            const repository = 'cavyn';

            fetch(`https://api.github.com/repos/${username}/${repository}/releases`)
                .then(response => response.json())
                .then(data => {
                    const releases = data.map(release => {
                        const assets = release.assets.map(asset => {
                            const size = (asset.size / 1000000).toFixed(2); // Convert to MB and round to 2 decimal places
                            const date = new Date(asset.updated_at).toLocaleDateString(); // Convert to local date string
                            return `
            <tr>
                <td class="platform"><i class="fa-solid fa-inbox-in"></i> ${asset.name}</td>
                <td class="size">${size} MB</td>
                <td class="version">${date}</td>
                <th class="download-link"><a href="${asset.browser_download_url}" download>Download</a></th>
            </tr>
        `;
                        }).join('');

                        return `
            <br>
            <div class="released">
            <table>
            ${assets}
            </table>
            </div>
      `;
                    }).join('');

                    releasesContainer.innerHTML = releases;
                })
                .catch(error => console.error(error));
        </script>

        <br>

        <div class="footer">
            <ul>
                <li><a href="https://cavyn.pages.dev/">Home</a></li>
                <li><a href="/downloads">Downloads</a></li>
                <li><a href="/sitemap.xml">Sitemap</a></li>
            </ul>
        </div>
    </main>
</body>

</html>
